@using ESFA.DC.Web.Operations.Constants
@using ESFA.DC.Web.Operations.Extensions
@*@model IEnumerable<ESFA.DC.EmailDistribution.Models.RecipientGroup>*@
@model ESFA.DC.Web.Operations.Areas.EmailDistribution.ViewModels.RecipientViewModel
@{
    ViewData["Title"] = "Add a new recipient";
    ViewData[ViewDataConstants.BackLink] = "/emaildistribution";
}


<h1 class="govuk-heading-xl">Enter the recipient's email address</h1>
<form asp-controller="Recipient" asp-action="Submit" method="post" id="choiceform">

    <div class="@ViewContext.GetGroupItemStyle(ErrorMessageKeys.Recipient_EmailFieldKey)" id="controls">
        <div class="govuk-form-group">
            <input class="govuk-input govuk-!-width-two-thirds" id="email" name="Email" value="@Model.Email" type="text">
        </div>
        <div error-field-name="@ErrorMessageKeys.Recipient_EmailFieldKey"></div>
    </div>


    <div class="govuk-form-group">
        <fieldset class="govuk-fieldset" aria-describedby="waste-hint">
            <span id="waste-hint" class="govuk-hint">
                Select which lists you'd like the recipient added to.
            </span>
            <div class="@ViewContext.GetGroupItemStyle(ErrorMessageKeys.Recipient_GroupsKey)" id="controls">
            <div class="govuk-checkboxes">

                @foreach (var group in Model.RecipientGroups)
                {
                    <div class="govuk-checkboxes__item">
                        <input class="govuk-checkboxes__input" id="@group.RecipientGroupId" @(Model.SelectedGroupIds.Contains(group.RecipientGroupId) ? "checked" : string.Empty ) name="SelectedGroupIds" type="checkbox" value="@group.RecipientGroupId">
                        <label class="govuk-label govuk-checkboxes__label" for="@group.RecipientGroupId">
                            @group.GroupName
                        </label>
                    </div>
                }
                <div class="govuk-checkboxes__item">
                    <input class="govuk-checkboxes__input" id="waste-4" name="SelectedGroupIds"  @(Model.SelectedGroupIds.Contains(0) ? "checked" : string.Empty ) type="checkbox" value="0">
                    <label class="govuk-label govuk-checkboxes__label" for="waste-4">
                        All
                    </label>
                </div>
            </div>
                <div error-field-name="@ErrorMessageKeys.Recipient_GroupsKey"></div>
            </div>
        </fieldset>
    </div>

    <button class="govuk-button">
        Add recipient
    </button>

</form>