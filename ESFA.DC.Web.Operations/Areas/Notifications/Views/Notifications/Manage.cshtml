@using ESFA.DC.Web.Operations.Constants
@model ESFA.DC.Web.Operations.Models.Notifications.Notification
@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    ViewData[ViewDataConstants.BackLink] = "/notifications";
}

<div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
        <h1 class="govuk-heading-x1">Notification details</h1>
    </div>
</div>
<br />
<div class="govuk-grid-column-two-thirds">
    <form asp-controller="Notifications" asp-action="Submit" method="post">

        <input type="hidden" asp-for="Id" />
        <table class="govuk-table">
            <tbody class="govuk-table__body">
                <tr class="govuk-table__row">
                    <td class="govuk-table__cell govuk-!-font-weight-bold">
                        Headline
                        <span class="govuk-caption-m">optional</span>
                    </td>
                    <td class="govuk-table__cell govuk-!-font-weight-bold">
                        <input class="govuk-input" type="text" asp-for="Headline">
                    </td>
                </tr>
                <tr class="govuk-table__row">
                    <td class="govuk-table__cell govuk-!-font-weight-bold">
                        Message
                    </td>
                    <td class="govuk-table__cell govuk-!-font-weight-bold">
                        <textarea class="govuk-textarea" id="more-detail" rows="5" aria-describedby="more-detail-hint" asp-for="Message"></textarea>
                    </td>
                </tr>
                <tr class="govuk-table__row">
                    <td class="govuk-table__cell govuk-!-font-weight-bold">
                        Start date
                    </td>
                    <td class="govuk-table__cell govuk-!-font-weight-bold">
                        <input class="govuk-input govuk-!-width-one-half" type="date" asp-for="StartDate">
                    </td>
                </tr>
                <tr class="govuk-table__row">
                    <td class="govuk-table__cell govuk-!-font-weight-bold">
                        Start time
                    </td>
                    <td class="govuk-table__cell govuk-!-font-weight-bold">
                        <input class="govuk-input govuk-!-width-one-half" type="time" asp-for="StartTime">
                    </td>
                </tr>
                <tr class="govuk-table__row">
                    <td class="govuk-table__cell govuk-!-font-weight-bold">
                        Finish date
                    </td>
                    <td class="govuk-table__cell govuk-!-font-weight-bold">
                        <input class="govuk-input govuk-!-width-one-half" type="date" asp-for="EndDate">
                    </td>
                </tr>
                <tr class="govuk-table__row">
                    <td class="govuk-table__cell govuk-!-font-weight-bold">
                        Finish time
                    </td>
                    <td class="govuk-table__cell govuk-!-font-weight-bold">
                        <input class="govuk-input govuk-!-width-one-half" type="time" asp-for="EndTime">
                    </td>
                </tr>
            </tbody>
        </table>

        <div id="buttons" style="display: block">
            <button type="submit" id="submitButton" name="save" class="govuk-button" value="save">Save</button>
            
            @if (Model?.Id>0)
            {
                <a id="deleteLink" style="display: inline-block" class="govuk-button govuk-button--warning" onclick="toggleWarning();">Delete</a>
            }
            &nbsp;&nbsp;&nbsp;    
            @Html.ActionLink("Cancel", "Index", "Notifications", null, new { @class = "govuk-button govuk-button--secondary" })
        </div>
    </form>

    <form asp-controller="Notifications" asp-action="Delete" method="post">
        <input type="hidden" asp-for="Id" />

        <div id="areYouSureWrapper" style="display: none;">
            <p>
                Are you sure you want to delete this message?
                <button type="submit" id="deleteButton" name="deleteButton" class="govuk-button" value="save">Yes</button>
                &nbsp; &nbsp;
                <a id="cancelDelete" class="govuk-button govuk-button--secondary" href="#" onclick="toggleWarning();">No</a>
            </p>
        </div>
    </form>




</div>

<script language="javascript">
    function toggleWarning(value) {
        document.getElementById('areYouSureWrapper').style.display = document.getElementById('areYouSureWrapper').style.display == 'block' ? 'none' : 'block';
        document.getElementById('buttons').style.display = document.getElementById('buttons').style.display == 'block' ? 'none' : 'block';
    }
</script>
